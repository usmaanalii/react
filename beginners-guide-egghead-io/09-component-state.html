<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <script src="https://unpkg.com/react@16.0.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.0.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/babel-standalone@6.26.0/babel.js"></script>
  <script src="https://unpkg.com/prop-types@15.6.0/prop-types.js"></script>
  <title>X</title>
</head>

<body>
  <div id="root"></div>
  <script type="text/babel">
    class StopWatch extends React.Component {
      state = {lapse: 0, running: false};

      handleRunCLick = () => {
        this.setState(state => {
            if (state.running) {
              clearInterval(this.timer);
            } else {
              const startTime = Date.now() - this.state.lapse;
              this.timer = setInterval(() => this.setState({ lapse: Date.now() - startTime }));
              this.setState({ running: true });
            }
        })
        return {running: !this.state.running}
      }

      handleClearClick = () => {
        clearInterval(this.timer);
        this.setState({
          lapse: 0, running: false
        })
      }

      componentWillUnmount() {
        clearInterval(this.timer);
      }

      render() {
        const {lapse, running} = this.state;
        const buttonStyles = {
          border: '1px solid #ccc',
          background: '#fff',
          fontSize: '2em',
          padding: 15,
          margin: 5,
          width: 200,
        }
        return (
          <div style={{ textAlign: 'center' }}>
            <label style={{ fontSize: '5em', display: 'block' }}>{lapse}ms</label>
            <button onClick={this.handleRunCLick} style={buttonStyles}>{running ? 'Stop' : 'Start'}</button>
            <button onClick={this.handleClearClick} style={buttonStyles}>End</button>
          </div>
        )
      }
    }

    const element = <StopWatch />
    ReactDOM.render(
      element,
      document.querySelector('#root')
    )
  </script>
</body>

</html>
